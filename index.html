<!doctype html>
<html class="no-js" lang="">

<head>
  <meta charset="utf-8">
  <title></title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:title" content="">
  <meta property="og:type" content="">
  <meta property="og:url" content="">
  <meta property="og:image" content="">

  <link rel="apple-touch-icon" href="icon.png">
  <!-- Place favicon.ico in the root directory -->

  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/main.css">

  <meta name="theme-color" content="#fafafa">
  <script src="https://pixijs.download/release/pixi.min.js"></script>
</head>

<body>

<!-- Add your site or application content here -->

<script src="js/main.js"></script>

<script>


  // Create the application helper and add its render target to the page
  let app = new PIXI.Application({width: window.innerWidth, height: window.innerHeight, resizeTo: window});
  document.body.appendChild(app.view);


  // Create window frame
  let frame = new PIXI.Graphics();

  let fill_colour = 0x666666
  frame.beginFill(fill_colour);
  frame.lineStyle({color: 0xffffff, width: 4, alignment: 0});
  frame.drawRect(0, 0, window.innerWidth, window.innerHeight);
  //frame.position.set(320 - 104, 180 - 104);
  app.stage.addChild(frame);

  // Create a graphics object to define our mask
  let mask = new PIXI.Graphics();
  // Add the rectangular area to show
  mask.beginFill(0xffffff);
  mask.drawCircle(0, 0, 100);
  mask.endFill();

  // Add container that will hold our masked content
  let maskContainer = new PIXI.Container();
  // Set the mask to use our graphics object from above
  maskContainer.mask = mask;
  // Add the mask as a child, so that the mask is positioned relative to its parent
  maskContainer.addChild(mask);
  //maskContainer.x = 200;
  // Offset by the window's frame width
  //maskContainer.position.set(4,4);
  // And add the container to the window!


  let some_text = `Winnie-the-Pooh strolled through the Hundred Acre Wood, enjoying the warm sunshine and gentle breeze. As they wandered, they couldn't help but feel a sense of contentment wash over them. Life was good.

    As they walked, Pooh encountered their friends, who were all going about their own business. Rabbit was harvesting carrots, Tigger was bouncing around, and Eeyore was lamenting the latest misfortune to befall him. Pooh greeted them all warmly, happy to see their familiar faces.

    As they continued on their way, Pooh came across a tree that they didn't recognize. It was tall and imposing, with a thick trunk and gnarled branches. Pooh was curious, and so they decided to investigate.

  As they drew closer, Pooh noticed that the tree was covered in a dense tangle of thorns. They were sharp and jagged, and Pooh realized that they would have to be careful if they wanted to get any closer.

    As they stood there, considering their next move, Pooh was struck by an idea. They remembered a time when they had been faced with a similar challenge, and had used kindness and compassion to overcome it.

    With a smile on their face, Pooh began to sing a gentle, soothing song. Slowly but surely, the thorns began to recede, revealing a beautiful, lush garden hidden behind them.

    Pooh looked around at the beauty they had uncovered, feeling a sense of satisfaction and joy. They knew that they had done something good, something kind, and that was all that mattered.`
  

  const style = new PIXI.TextStyle({
    fontFamily: 'Arial',
    fontSize: 36,
    wordWrap: true,
    lineHeight:150,
    align : 'center',
    wordWrapWidth: window.innerWidth
  });

  let text_blur = new PIXI.Text(
    some_text,
    style
  );

  var blurFilter = new PIXI.filters.BlurFilter();
  const blurContainer = new PIXI.Container();
  blurContainer.filters = [blurFilter];
  blurContainer.addChild(text_blur);
  frame.addChild(blurContainer);
  frame.addChild(maskContainer);

  // Create contents for the masked container
  let text = new PIXI.Text(
    some_text,
    style
  );
  maskContainer.beginFill =  fill_colour;
  let background =  new PIXI.Graphics()
    .beginFill(0xFFFFFF)
    .drawRect(0,0, window.innerWidth, window.innerHeight)
    .endFill();
  maskContainer.addChild(background)
  maskContainer.addChild(text);



  text.x = 0;

  frame.interactive = true;
  frame.on('mousemove', pointerMove);

  function pointerMove(event) {
    const el = mask;
    el.position.x = event.data.x;
    el.position.y = event.data.y;
  }


</script>
</body>

</html>
